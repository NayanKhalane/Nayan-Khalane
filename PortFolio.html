<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Nayan Mahesh Khalane - Portfolio</title>

    <!-- Fonts / icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script>
        tailwind = { config: { corePlugins: { preflight: false } } };
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* ---------- Reset & root ---------- */
        * { margin:0; padding:0; box-sizing:border-box; -webkit-tap-highlight-color: transparent; }
        :root{
            --primary-blue:#2563eb;
            --primary-red:#f97316;
            --primary-purple:#a855f7;
            --electric-cyan:#22d3ee;
            --sunset-orange:#fb7185;
            --accent:#38bdf8;
            --glass-border: rgba(255,255,255,0.06);
        }

        html,body { height:100%; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow-x:hidden;
            transition: background 0.6s ease, color 0.6s ease;
            -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
            color: var(--text-primary, #f9fafb);
            background: radial-gradient(circle at top left, #050816 0%, #0f172a 40%, #111827 100%);
        }

        /* ---------- Theme variables (light/dark) ---------- */
        body.dark-mode {
            --text-primary: #f9fafb;
            --text-muted: rgba(226,232,240,0.75);
            --surface: linear-gradient(135deg, rgba(17,24,39,0.92), rgba(30,41,59,0.92));
            --surface-border: rgba(94,234,212,0.08);
            --nav-bg: rgba(10,10,15,0.82);
            --nav-bg-scrolled: rgba(10,10,15,0.95);
            --footer-bg: rgba(10,10,15,0.85);
        }

        body.light-mode {
            --text-primary: #0f172a;
            --text-muted: rgba(51,65,85,0.8);
            --surface: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(240,249,255,0.9));
            --surface-border: rgba(37,99,235,0.12);
            --nav-bg: rgba(255,255,255,0.8);
            --nav-bg-scrolled: rgba(255,255,255,0.95);
            --footer-bg: rgba(248,250,252,0.92);
        }

        /* ---------- Logo ---------- */
        .logo {
            position: fixed;
            top: 20px;
            left: 30px;
            z-index: 1200;
            width:64px; height:64px; border-radius:50%;
            display:flex; align-items:center; justify-content:center;
            font-weight:700; color:white; font-size:28px;
            background: linear-gradient(135deg,var(--primary-blue),var(--primary-red));
            box-shadow: 0 8px 32px rgba(37,99,235,0.16);
            transform-origin:center;
            transition: transform .45s cubic-bezier(.2,.9,.3,1), box-shadow .3s;
            cursor:pointer;
        }
        .logo:hover{ transform: translateY(-6px) rotate(10deg) scale(1.05); box-shadow: 0 20px 50px rgba(37,99,235,0.2); }

        /* ---------- Nebula / Galaxy (top-right) ---------- */
        .nebula {
            position: fixed;
            top: -160px;
            right: -160px;
            width: 560px;
            height: 560px;
            z-index: 2;
            pointer-events: none;
            filter: saturate(110%);
        }
        .nebula .cloud {
            position:absolute; inset:0;
            border-radius:50%;
            background: radial-gradient(circle at 25% 25%, rgba(168,85,247,0.38), transparent 35%),
                        radial-gradient(circle at 75% 60%, rgba(34,211,238,0.18), transparent 50%),
                        radial-gradient(circle at 60% 25%, rgba(248,113,113,0.18), transparent 40%);
            filter: blur(48px);
            transform-origin:center;
            animation: nebPulse 10s ease-in-out infinite;
            mix-blend-mode: screen;
        }
        .nebula .spin {
            position:absolute; width:80%; height:80%; top:10%; right:10%;
            border-radius:50%;
            background: radial-gradient(circle at 40% 40%, rgba(30,64,175,0.35), transparent 50%),
                        radial-gradient(circle at 70% 70%, rgba(76,5,25,0.25), transparent 55%);
            filter: blur(62px); animation: nebRotate 22s linear infinite;
            mix-blend-mode: screen;
        }
        .nebula .stars {
            position:absolute; inset:0;
            pointer-events:none;
        }
        .nebula .stars i {
            position:absolute; width:2px; height:2px; border-radius:50%;
            background: rgba(255,255,255,0.9); opacity:0.9;
            filter: drop-shadow(0 0 4px rgba(255,255,255,0.12));
            animation: starTwinkle calc(3s + (var(--i)*.5s)) ease-in-out infinite;
        }

        @keyframes nebPulse {
            0%,100%{ transform: scale(1); opacity:.9; }
            50%{ transform: scale(1.12); opacity:1; }
        }
        @keyframes nebRotate {
            0%{ transform: rotate(0deg); }
            100%{ transform: rotate(360deg); }
        }
        @keyframes starTwinkle {
            0%{ opacity:.1; transform:scale(.9); }
            50%{ opacity:1; transform:scale(1.1); }
            100%{ opacity:.1; transform:scale(.9); }
        }

        /* ---------- Navigation ---------- */
        nav {
            position:fixed; top:0; left:0; width:100%; z-index:1100;
            padding:14px 120px; backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(255,255,255,0.02);
            transition: background .5s ease, padding .25s;
            background: var(--nav-bg);
        }
        .nav-links{ display:flex; justify-content:center; gap:30px; list-style:none; }
        .nav-links a{ text-decoration:none; color:var(--text-primary); font-weight:600; letter-spacing:.4px; padding:8px 6px; position:relative; transition:color .25s; }
        .nav-links a::after{ content:''; position:absolute; left:0; bottom:-8px; width:0; height:3px; border-radius:4px;
            background: linear-gradient(90deg,var(--primary-blue),var(--electric-cyan),var(--sunset-orange),var(--primary-purple)); transition: width .28s cubic-bezier(.2,.9,.3,1); }
        .nav-links a:hover::after{ width:100%; }
        .theme-toggle {
            position:absolute; right:40px; top:50%; transform:translateY(-50%);
            width:48px; height:48px; border-radius:50%; border:none; cursor:pointer;
            background: linear-gradient(135deg,var(--primary-blue),var(--primary-purple),var(--sunset-orange));
            color:#fff; display:flex; align-items:center; justify-content:center; box-shadow: 0 12px 34px rgba(37,99,235,0.18);
            transition: transform .25s, box-shadow .25s;
        }
        .theme-toggle:hover{ transform: translateY(-50%) scale(1.06); box-shadow: 0 20px 48px rgba(37,99,235,0.22); }

        /* ---------- Hero ---------- */
        .hero {
            min-height:100vh; display:flex; align-items:center; justify-content:center; text-align:center;
            padding:120px 20px 60px; position:relative; z-index:5;
        }
        .hero-content h1{
            font-size:4.2rem; font-weight:800; margin-bottom:14px;
            background: linear-gradient(90deg,var(--primary-blue),var(--electric-cyan),var(--sunset-orange),var(--primary-purple));
            -webkit-background-clip:text; -webkit-text-fill-color:transparent;
            animation: fadeInUp .9s cubic-bezier(.2,.9,.3,1);
        }
        .subtitle{ font-size:1.2rem; color:var(--text-muted); margin-bottom:18px; opacity:.95; }

        @keyframes fadeInUp {
            from{ opacity:0; transform:translateY(24px); } to{ opacity:1; transform:translateY(0); }
        }

        /* ---------- Sections & glass cards ---------- */
        section{ padding:80px 20px; position:relative; z-index:4; overflow:hidden; }
        .section-title{ font-size:2.6rem; text-transform:uppercase; letter-spacing:2px; text-align:center; margin-bottom:40px;
            background: linear-gradient(90deg,var(--primary-blue),var(--electric-cyan),var(--sunset-orange)); -webkit-background-clip:text; -webkit-text-fill-color:transparent;
        }

        .about-card, .project-card, .contact-card {
            background: var(--surface); border-radius:18px; padding:30px; border:1px solid var(--surface-border);
            backdrop-filter: blur(14px); box-shadow: 0 18px 48px rgba(2,6,23,0.45);
            transition: transform .45s cubic-bezier(.2,.9,.3,1), box-shadow .35s, border-color .35s;
            position:relative; overflow:hidden;
        }

        /* 3D tilt + depth for cards */
        .card-3d-wrap { perspective: 1200px; }
        .card-3d {
            transform-style: preserve-3d;
            will-change: transform;
            transition: transform .32s cubic-bezier(.2,.9,.3,1), box-shadow .32s, filter .32s;
            -webkit-tap-highlight-color:transparent;
        }
        .card-3d:hover { transform: translateY(-8px) translateZ(12px) rotateX(1deg); box-shadow: 0 30px 80px rgba(37,99,235,0.14); }

        /* Decorative glows inside the card */
        .card-3d::before, .card-3d::after {
            content:''; position:absolute; pointer-events:none; border-radius:50%;
            transition: transform .6s ease, opacity .6s ease;
        }
        .card-3d::before { width:260px; height:260px; top:-100px; right:-120px; background: radial-gradient(circle at 30% 30%, rgba(37,99,235,0.45), transparent 45%); filter: blur(70px); opacity:.5; }
        .card-3d::after { width:220px; height:220px; bottom:-120px; left:-120px; background: radial-gradient(circle at 70% 70%, rgba(236,72,153,0.42), transparent 45%); filter: blur(70px); opacity:.45; }

        /* Skill bars */
        .skill-bar { height:24px; background: rgba(255,255,255,0.03); border-radius:999px; overflow:hidden; }
        .skill-progress {
            height:100%; width:0%; border-radius:999px; display:flex; align-items:center; justify-content:flex-end; padding-right:10px; color:white;
            font-weight:700; font-size:.9rem; box-shadow: 0 8px 20px rgba(34,211,238,0.08);
            background: linear-gradient(90deg,var(--primary-blue),var(--electric-cyan),var(--sunset-orange));
            transition: width 1.1s cubic-bezier(.2,.9,.3,1);
        }

        /* Project cards grid */
        .projects-grid { display:grid; grid-template-columns: repeat(auto-fit,minmax(260px,1fr)); gap:1.4rem; align-items:stretch; }
        .project-card { min-height:260px; display:flex; flex-direction:column; gap:12px; justify-content:flex-start; cursor:default; }

        .project-card .project-icon { font-size:2.8rem; margin-bottom:6px; background: linear-gradient(90deg,var(--primary-blue),var(--electric-cyan),var(--sunset-orange)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }

        /* Hover / active styles for project clickable */
        .project-card.clickable { cursor:pointer; transform-origin:center; }
        .project-card.clickable:active{ transform: translateY(-2px) scale(.997); }
        .project-card.clickable .cta { margin-top:auto; align-self:flex-start; }

        /* 3D tilt effect (mousemove) helper */
        .tilt-layer { transform: translateZ(0); transition: transform .18s ease-out; }

        /* Footer */
        footer { text-align:center; padding:28px; background:var(--footer-bg); border-top:1px solid rgba(255,255,255,0.03); color:var(--text-primary); z-index:4; }

        /* Fade-in observed */
        .fade-in { opacity:0; transform:translateY(22px); transition: opacity .6s ease-out, transform .6s ease-out; }
        .fade-in.visible { opacity:1; transform:translateY(0); }

        /* ---------- Particles background (original) ---------- */
        .particles { position:fixed; inset:0; z-index:0; pointer-events:none; overflow:hidden; }
        .particle { position:absolute; width:2px; height:2px; border-radius:50%; opacity:.28; animation: float 18s linear infinite; }
        @keyframes float {
            0% { transform: translateY(110vh) translateX(0); opacity:0; }
            10% { opacity:.32; }
            90% { opacity:.28; }
            100% { transform: translateY(-110vh) translateX(80px); opacity:0; }
        }

        /* ---------- Upward Rain (colored) ---------- */
        .rain-wrap {
            position: fixed; inset:0; z-index:3; pointer-events:none; overflow:visible;
            mix-blend-mode: screen;
        }
        .drop {
            position:absolute; bottom:-10vh; width:2px; height:20px; border-radius:2px; opacity:0.75;
            transform-origin:center;
            filter: drop-shadow(0 6px 12px rgba(0,0,0,0.12));
            animation: rise linear infinite;
            will-change: transform, opacity;
        }
        @keyframes rise {
            0% { transform: translateY(0) scaleY(1); opacity:.08; }
            6% { opacity:.65; }
            80% { opacity:.65; }
            100% { transform: translateY(-130vh) scaleY(0.7); opacity:0; }
        }

        /* Responsive adjustments */
        @media (max-width: 992px){
            nav{ padding:12px 40px; }
            .logo { left:18px; top:14px; width:56px; height:56px; font-size:24px; }
            .theme-toggle { right:18px; }
            .hero-content h1 { font-size:3rem; }
            .section-title { font-size:2rem; }
        }
        @media (max-width:576px){
            nav{ padding:10px 20px; }
            .logo{ display:flex; left:12px; top:12px; width:52px; height:52px; }
            .hero-content h1{ font-size:2.2rem; }
        }
    </style>
</head>
<body class="dark-mode">
    <!-- NK Logo -->
    <div class="logo" onclick="window.scrollTo({top:0, behavior:'smooth'})">NK</div>

    <!-- Nebula / Galaxy top-right -->
    <div class="nebula" aria-hidden="true">
        <div class="cloud"></div>
        <div class="spin"></div>
        <div class="stars" id="nebulaStars"></div>
    </div>

    <!-- Upward Rain (colored) -->
    <div class="rain-wrap" id="rainWrap" aria-hidden="true"></div>

    <!-- Particles (original) -->
    <div class="particles" id="particles"></div>

    <!-- Navigation -->
    <nav>
        <ul class="nav-links">
            <li><a href="#home">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#skills">Skills</a></li>
            <li><a href="#projects">Projects</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul>
        <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
            <i class="fas fa-sun"></i>
        </button>
    </nav>

    <!-- Hero -->
    <section id="home" class="hero">
        <div class="hero-content max-w-4xl mx-auto">
            <h1>Nayan Mahesh Khalane</h1>
            <p class="subtitle">MCA Pursuing Student</p>
            <div style="display:flex; gap:12px; justify-content:center; flex-wrap:wrap;">
                <span class="badge shadow-lg" style="padding:10px 22px; border-radius:999px; background:rgba(255,255,255,0.03); color:var(--text-primary)">Software Developer</span>
                <span class="badge shadow-lg" style="padding:10px 22px; border-radius:999px; background:rgba(255,255,255,0.03); color:var(--text-primary)">Problem Solver</span>
            </div>
        </div>
    </section>

    <!-- About -->
    <section id="about">
        <h2 class="section-title">About Me</h2>
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="card-3d-wrap fade-in">
                        <div class="about-card card-3d tilt-layer">
                            <h3 class="mb-3">Education</h3>
                            <p><strong>Current:</strong> MCA (Master of Computer Applications) - Pursuing</p>
                            <p><strong>Previous:</strong> BCA (Bachelor of Computer Applications)</p>
                            <div style="display:inline-block;padding:12px 22px;border-radius:12px;background:linear-gradient(90deg,var(--primary-blue),var(--electric-cyan));color:white;margin:14px 0;font-weight:800;">BCA CGPA: 9.18</div>
                            <p class="mt-3">A passionate MCA student with a strong foundation in computer applications. I focus on clean UI, modern front-end techniques and practical algorithmic problem solving.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Skills -->
    <section id="skills">
        <h2 class="section-title">Skills</h2>
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="about-card fade-in">
                        <div class="skill-item mb-3">
                            <div class="d-flex justify-content-between fw-bold mb-2"><span><i class="fas fa-database"></i> SQL</span><span>80%</span></div>
                            <div class="skill-bar"><div class="skill-progress" data-width="80">80%</div></div>
                        </div>
                        <div class="skill-item mb-3">
                            <div class="d-flex justify-content-between fw-bold mb-2"><span><i class="fab fa-java"></i> Java</span><span>70%</span></div>
                            <div class="skill-bar"><div class="skill-progress" data-width="70">70%</div></div>
                        </div>
                        <div class="skill-item mb-3">
                            <div class="d-flex justify-content-between fw-bold mb-2"><span><i class="fab fa-python"></i> Python</span><span>50%</span></div>
                            <div class="skill-bar"><div class="skill-progress" data-width="50">50%</div></div>
                        </div>
                        <div class="skill-item mb-3">
                            <div class="d-flex justify-content-between fw-bold mb-2"><span><i class="fab fa-html5"></i> HTML</span><span>30%</span></div>
                            <div class="skill-bar"><div class="skill-progress" data-width="30">30%</div></div>
                        </div>
                        <div class="skill-item mb-3">
                            <div class="d-flex justify-content-between fw-bold mb-2"><span><i class="fab fa-css3-alt"></i> CSS</span><span>20%</span></div>
                            <div class="skill-bar"><div class="skill-progress" data-width="20">20%</div></div>
                        </div>
                        <div class="skill-item">
                            <div class="d-flex justify-content-between fw-bold mb-2"><span><i class="fab fa-js"></i> JavaScript</span><span>5%</span></div>
                            <div class="skill-bar"><div class="skill-progress" data-width="5">5%</div></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Projects -->
    <section id="projects">
        <h2 class="section-title">Projects</h2>
        <div class="container">
            <div class="projects-grid fade-in">
                <div class="card-3d-wrap">
                    <div class="project-card card-3d">
                        <div class="project-icon"><i class="fas fa-money-bill-wave"></i></div>
                        <h3>Fees Payment Management System</h3>
                        <p>A comprehensive system designed to manage and streamline fee payments for educational institutions. This demonstrates database & UI skills.</p>
                        <div class="cta mt-2"><a class="resume-btn" href="#" onclick="alert('Open project or add link')"><i class="fas fa-external-link-alt"></i> View Project</a></div>
                    </div>
                </div>

                <!-- Sorting Visualizer: clickable and opens sorting_visualizer.html -->
                <div class="card-3d-wrap">
                    <div class="project-card card-3d clickable" data-link="sorting_visualizer.html" id="sortingCard" role="button" tabindex="0" aria-pressed="false">
                        <div class="project-icon"><i class="fas fa-sort"></i></div>
                        <h3>Sorting Algorithm Visualizer</h3>
                        <p>An interactive visualization tool demonstrating various sorting algorithms in action. Click to open the visualizer in a new tab.</p>
                        <div class="cta mt-2"><a class="resume-btn" href="sorting_visualizer.html" target="_blank"><i class="fas fa-arrow-up-right-from-square"></i> Open Visualizer</a></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact -->
    <section id="contact">
        <h2 class="section-title">Contact Me</h2>
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-6">
                    <div class="contact-card fade-in">
                        <div class="contact-item d-flex align-items-center justify-content-center gap-3" style="padding:12px; border-radius:10px; background:rgba(255,255,255,0.02)">
                            <i class="fas fa-phone fa-2x"></i><a href="tel:+918551840178">+91 8551840178</a>
                        </div>
                        <div class="contact-item d-flex align-items-center justify-content-center gap-3" style="margin-top:12px; background:rgba(255,255,255,0.02)">
                            <i class="fas fa-envelope fa-2x"></i><a href="mailto:nayankhalane@gmail.com">nayankhalane@gmail.com</a>
                        </div>
                        <a href="resume.pdf" class="resume-btn" target="_blank" style="display:inline-flex; margin-top:18px;"><i class="fas fa-download"></i> Download Resume</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer><p>&copy; 2024 Nayan Mahesh Khalane. All rights reserved.</p></footer>

    <!-- Bootstrap bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        /* ---------- Theme & DOM references ---------- */
        const body = document.body;
        const nav = document.querySelector('nav');
        const themeToggle = document.getElementById('themeToggle');

        // Apply theme logic (same as original but integrated)
        const applyTheme = (theme) => {
            body.classList.remove('light-mode','dark-mode');
            body.classList.add(theme);
            themeToggle.innerHTML = theme === 'dark-mode' ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
            themeToggle.setAttribute('aria-label', theme === 'dark-mode' ? 'Switch to light mode' : 'Switch to dark mode');
            updateNavBackground();
            createParticles();
            createRainDrops();
        };

        const savedTheme = localStorage.getItem('preferred-theme');
        const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        applyTheme(savedTheme || (prefersDark ? 'dark-mode' : 'light-mode'));

        themeToggle.addEventListener('click', () => {
            const next = body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';
            applyTheme(next);
            localStorage.setItem('preferred-theme', next);
        });

        // Smooth anchor scrolling
        document.querySelectorAll('a[href^="#"]').forEach(a => {
            a.addEventListener('click', function(e){
                const href = this.getAttribute('href');
                if(!href || href === '#') return;
                e.preventDefault();
                const target = document.querySelector(href);
                if(target) target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            });
        });

        // Observer for fade-in
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if(entry.isIntersecting) entry.target.classList.add('visible');
            });
        }, { threshold: 0.12, rootMargin: '0px 0px -40px 0px' });

        document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));

        // Skills animation
        const skillObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if(entry.isIntersecting){
                    const p = entry.target;
                    const w = p.getAttribute('data-width') || '40';
                    setTimeout(()=> p.style.width = w + '%', 200);
                }
            });
        }, { threshold: 0.5 });

        document.querySelectorAll('.skill-progress').forEach(bar => {
            bar.style.width = '0%';
            skillObserver.observe(bar);
        });

        // Navbar background on scroll
        function updateNavBackground(){
            const scrolled = window.scrollY > 40;
            nav.style.background = getComputedStyle(body).getPropertyValue(scrolled ? '--nav-bg-scrolled' : '--nav-bg') || (body.classList.contains('dark-mode') ? 'rgba(10,10,15,0.82)' : 'rgba(255,255,255,0.8)');
        }
        window.addEventListener('scroll', updateNavBackground);
        updateNavBackground();

        /* ---------- Particles creation (kept but tuned) ---------- */
        function createParticles(){
            const particlesContainer = document.getElementById('particles');
            if(!particlesContainer) return;
            const particleCount = 60;
            const paletteMap = {
                'dark-mode': ['#38bdf8','#a855f7','#f97316','#22d3ee','#fb7185','#facc15','#34d399'],
                'light-mode': ['#2563eb','#ec4899','#f59e0b','#0ea5e9','#22c55e','#8b5cf6','#f97316']
            };
            const theme = body.classList.contains('dark-mode') ? 'dark-mode' : 'light-mode';
            const palette = paletteMap[theme];
            particlesContainer.innerHTML = '';
            for(let i=0;i<particleCount;i++){
                const p = document.createElement('div');
                p.className = 'particle';
                p.style.left = (Math.random()*100) + '%';
                p.style.bottom = (-10 - Math.random()*20) + 'vh';
                p.style.width = (1 + Math.random()*3) + 'px';
                p.style.height = p.style.width;
                p.style.animationDuration = (12 + Math.random()*12) + 's';
                p.style.animationDelay = (Math.random()*8) + 's';
                p.style.background = palette[Math.floor(Math.random()*palette.length)];
                p.style.opacity = 0.12 + Math.random()*0.36;
                particlesContainer.appendChild(p);
            }
        }

        /* ---------- Nebula stars generation ---------- */
        (function makeNebulaStars(){
            const starsContainer = document.getElementById('nebulaStars');
            if(!starsContainer) return;
            const count = 28;
            starsContainer.innerHTML = '';
            for(let i=0;i<count;i++){
                const s = document.createElement('i');
                const left = (10 + Math.random()*80);
                const top = (10 + Math.random()*80);
                s.style.left = left + '%';
                s.style.top = top + '%';
                s.style.width = (Math.random()*2.6 + 0.8) + 'px';
                s.style.height = s.style.width;
                s.style.background = `rgba(255,255,255, ${0.6 + Math.random()*0.4})`;
                s.style.setProperty('--i', (Math.random()*3).toFixed(2));
                starsContainer.appendChild(s);
            }
        })();

        /* ---------- Upward colored rain ---------- */
        function createRainDrops(){
            const wrap = document.getElementById('rainWrap');
            if(!wrap) return;
            wrap.innerHTML = '';
            const theme = body.classList.contains('dark-mode') ? 'dark-mode' : 'light-mode';
            const palettes = {
                'dark-mode': ['rgba(34,211,238,0.95)','rgba(168,85,247,0.95)','rgba(248,113,113,0.95)','rgba(59,130,246,0.95)','rgba(252,211,77,0.95)'],
                'light-mode': ['rgba(37,99,235,0.95)','rgba(236,72,153,0.95)','rgba(249,115,22,0.95)','rgba(96,165,250,0.95)','rgba(16,185,129,0.95)']
            };
            const palette = palettes[theme];
            const dropCount = 36;
            for(let i=0;i<dropCount;i++){
                const d = document.createElement('div');
                d.className='drop';
                const left = Math.random()*100;
                const width = 1 + Math.random()*3; // thickness
                const height = 12 + Math.random()*26; // length
                d.style.left = left + '%';
                d.style.width = width + 'px';
                d.style.height = height + 'px';
                d.style.background = palette[Math.floor(Math.random()*palette.length)];
                const duration = 6 + Math.random()*10;
                d.style.animationDuration = duration + 's';
                d.style.animationDelay = (Math.random()*3) + 's';
                d.style.opacity = 0.25 + Math.random()*0.5;
                wrap.appendChild(d);
            }
        }

        // Initialize particles & rain
        createParticles();
        createRainDrops();

        // Recreate on resize for better spread
        let resizeTimer;
        window.addEventListener('resize', ()=> {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(()=> { createParticles(); createRainDrops(); }, 250);
        });

        /* ---------- Project card click / keyboard handling ---------- */
        document.querySelectorAll('.project-card.clickable').forEach(card => {
            card.style.cursor = 'pointer';
            card.addEventListener('click', (e)=>{
                const link = card.getAttribute('data-link');
                if(link) window.open(link, '_blank');
            });
            // keyboard accessibility
            card.addEventListener('keydown', (e)=>{
                if(e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    const link = card.getAttribute('data-link');
                    if(link) window.open(link, '_blank');
                }
            });
        });

        /* ---------- 3D tilt on mousemove for card-3d-wrap ---------- */
        document.querySelectorAll('.card-3d-wrap').forEach(wrapper=>{
            const card = wrapper.querySelector('.card-3d');
            if(!card) return;
            wrapper.addEventListener('mousemove', (ev)=>{
                const rect = wrapper.getBoundingClientRect();
                const cx = rect.left + rect.width / 2;
                const cy = rect.top + rect.height / 2;
                // rotate range
                const dx = (ev.clientX - cx) / (rect.width/2);
                const dy = (ev.clientY - cy) / (rect.height/2);
                const rx = (dy * 6) * -1; // rotateX
                const ry = (dx * 10); // rotateY
                const tz = 12; // translateZ
                card.style.transform = `rotateX(${rx}deg) rotateY(${ry}deg) translateZ(${tz}px) translateY(-6px)`;
                // subtle lighting shift
                card.style.filter = `brightness(${1 + Math.abs(dx*0.04) + Math.abs(dy*0.02)})`;
            });
            wrapper.addEventListener('mouseleave', ()=>{
                card.style.transform = '';
                card.style.filter = '';
            });
        });

        /* ---------- Typed hero headline (gentle) ---------- */
        const heroTitle = document.querySelector('.hero-content h1');
        const originalText = heroTitle.textContent.trim();
        heroTitle.textContent = '';
        let idx = 0;
        function typeWriter() {
            if (idx < originalText.length) {
                heroTitle.textContent += originalText[idx++];
                setTimeout(typeWriter, 90);
            }
        }
        setTimeout(typeWriter, 500);

        /* ---------- Small accessibility / email open ---------- */
        document.querySelectorAll('a[href^="mailto:"]').forEach(el=>{
            el.addEventListener('click', (e)=>{
                // allow default behaviour (opens mail client)
            });
        });

        // Ensure clickable <a> on project also opens in new tab for users who click the CTA
        document.querySelectorAll('.project-card .resume-btn').forEach(btn=>{
            btn.addEventListener('click', (e)=>{
                // if it's anchor with href, default opens; no extra handling needed
            });
        });
    </script>
</body>
</html>
